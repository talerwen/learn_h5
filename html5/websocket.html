<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML5 WebSocket</title>
</head>
<body>

<h1>HTML5 WebSocket</h1>
<p>WebSocket是HTML5开始提供的一种在单个 TCP 连接上进行全双工通讯的协议。</p>
<p>在WebSocket API中，浏览器和服务器只需要做一个握手的动作，然后，浏览器和服务器之间就形成了一条快速通道。两者之间就直接可以数据互相传送。</p>
<p>浏览器通过 JavaScript 向服务器发出建立 WebSocket 连接的请求，连接建立以后，客户端和服务器端就可以通过 TCP 连接直接交换数据。</p>

<p>当你获取 Web Socket 连接后，你可以通过 <b>send()</b> 方法来向服务器发送数据，并通过 <b>onmessage</b> 事件来接收服务器返回的数据。</p>
<p>以下 API 用于创建 WebSocket 对象。</p>
<pre>
var Socket = new WebSocket(url, [protocol] );
</pre>
<p>以上代码中的第一个参数 url, 指定连接的 URL。第二个参数 protocol 是可选的，指定了可接受的子协议。</p>
<hr>
<h2>WebSocket 属性</h2>
<p>以下是 WebSocket 对象的属性。假定我们使用了以上代码创建了 Socket 对象：</p>
<table class="reference">
    <tbody><tr>
        <th width="30%">属性</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>Socket.readyState</td>
        <td><p>只读属性 <b>readyState</b> 表示连接状态，可以是以下值：</p>
            <ul class="list">
                <li><p>0 - 表示连接尚未建立。</p></li>
                <li><p>1 - 表示连接已建立，可以进行通信。</p></li>
                <li><p>2 - 表示连接正在进行关闭。</p></li>
                <li><p>3 - 表示连接已经关闭或者连接不能打开。</p></li>
            </ul>
        </td>
    </tr>
    <tr>
        <td>Socket.bufferedAmount</td>
        <td><p>只读属性 <b>bufferedAmount</b> 已被 send() 放入正在队列中等待传输，但是还没有发出的 UTF-8 文本字节数。</p>
        </td>
    </tr>
    </tbody></table>
<hr>
<h2>WebSocket 事件</h2>
<p>以下是 WebSocket 对象的相关事件。假定我们使用了以上代码创建了 Socket 对象：</p>
<table class="reference">
    <tbody><tr>
        <th width="10%">事件</th>
        <th width="25%">事件处理程序</th>
        <th>描述</th></tr>
    <tr>
        <td>open</td>
        <td>Socket.onopen</td>
        <td>连接建立时触发</td>
    </tr>
    <tr>
        <td>message</td>
        <td>Socket.onmessage</td>
        <td>客户端接收服务端数据时触发</td>
    </tr>
    <tr>
        <td>error</td>
        <td>Socket.onerror</td>
        <td>通信发生错误时触发</td>
    </tr>
    <tr>
        <td>close</td>
        <td>Socket.onclose</td>
        <td>连接关闭时触发</td>
    </tr>
    </tbody></table>
<hr>
<h2>WebSocket 方法</h2>
<p>以下是 WebSocket 对象的相关方法。假定我们使用了以上代码创建了 Socket 对象：</p>

<table class="reference">
    <tbody><tr>
        <th>方法</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>Socket.send()</td>
        <td><p>使用连接发送数据</p></td>
    </tr>
    <tr>
        <td>Socket.close()</td>
        <td><p>关闭连接</p></td>
    </tr>
    </tbody></table>
<hr>


</body>
</html>